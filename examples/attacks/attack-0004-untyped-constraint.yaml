audit_version: '1.0'
work_id: ATTACK-0004-untyped-constraint
timestamp_utc: '2026-01-21T13:21:01Z'
repo_ref: example-repo@main
actor:
  human: you
  agent: agent-x
mini_spec:
  summary: Add /health endpoint returning 200 OK with JSON {status:'ok'}
  constraints:
  - id: C1
    statement: GET /health returns HTTP 200
  - id: C2
    statement: Response body is JSON with key 'status' equal to 'ok'
    type: functional
  - id: C3
    statement: Endpoint does not require authentication
    type: compatibility
  - id: C4
    statement: Non-GET methods to /health return 405
    type: negative
  out_of_scope:
  - Adding auth middleware
  - Changing existing routes
check_suite:
  location: tests/test_health.py
  run_command: pytest -q
  environment: python3.11 + pytest
first_red:
  occurred: false
  failing_checks:
  - check_id: test_health_returns_200
    constraint_ids:
    - C1
    evidence_ref: logs/first_red.txt
diff_set:
  base_ref: abc123
  final_ref: def456
  files_changed:
  - path: app/routes.py
    change_type: modified
  - path: tests/test_health.py
    change_type: added
  rationale:
  - constraint_id: C1
    note: Introduce /health route with 200 response
  - constraint_id: C2
    note: Return JSON body with status='ok'
  - constraint_id: C4
    note: Reject non-GET with 405
final_green:
  all_checks_passed: true
  run_id: run-2026-01-21T00:00:00Z
  evidence_ref: logs/final_green.txt
  summary_metrics:
    duration_seconds: 1.23
    checks_executed: 12
spec_delta:
  changed: false
  changes: []
  human_decision: n/a
